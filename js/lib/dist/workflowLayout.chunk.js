(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["workflowLayout"],{

/***/ "./src/components/Workflow/Editor/modules/layout.js":
/*!**********************************************************!*\
  !*** ./src/components/Workflow/Editor/modules/layout.js ***!
  \**********************************************************/
/*! exports provided: autoLayout */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"autoLayout\", function() { return autoLayout; });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.custom-exposed.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var elkjs_lib_elk_bundled_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! elkjs/lib/elk.bundled.js */ \"./node_modules/elkjs/lib/elk.bundled.js\");\n/* harmony import */ var elkjs_lib_elk_bundled_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(elkjs_lib_elk_bundled_js__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar elk = new elkjs_lib_elk_bundled_js__WEBPACK_IMPORTED_MODULE_1___default.a();\nfunction autoLayout(workflow) {\n  workflow.hasChanges = true; // Convert this to ELK compat.\n\n  var newgraph = {\n    id: \"\",\n    layoutOptions: {\n      \"elk.algorithm\": \"layered\",\n      \"crossingMinimization.semiInteractive\": true,\n      \"nodePlacement.strategy\": \"NETWORK_SIMPLEX\"\n    },\n    children: [],\n    edges: []\n  };\n  newgraph.children = Object.values(workflow.nodes).map(function (node) {\n    var inputs = Object.keys(node.inputTerminals).map(function (t, idx) {\n      return {\n        id: \"\".concat(node._uid, \"/in/\").concat(t),\n        properties: {\n          \"port.side\": \"WEST\",\n          \"port.index\": idx\n        }\n      };\n    });\n    var outputs = Object.keys(node.outputTerminals).map(function (t, idx) {\n      return {\n        id: \"\".concat(node._uid, \"/out/\").concat(t),\n        properties: {\n          \"port.side\": \"EAST\",\n          \"port.index\": idx\n        }\n      };\n    });\n    return {\n      id: node._uid,\n      height: jquery__WEBPACK_IMPORTED_MODULE_0___default()(node.element).height() + 20,\n      width: jquery__WEBPACK_IMPORTED_MODULE_0___default()(node.element).width() + 60,\n      ports: inputs.concat(outputs)\n    };\n  });\n  Object.values(workflow.nodes).forEach(function (node) {\n    Object.values(node.inputTerminals).forEach(function (t) {\n      t.connectors.forEach(function (c) {\n        newgraph.edges.push({\n          id: \"e_\".concat(node._uid, \"_\").concat(c.outputHandle.node._uid),\n          sources: [\"\".concat(c.outputHandle.node._uid, \"/out/\").concat(c.outputHandle.name)],\n          targets: [\"\".concat(c.inputHandle.node._uid, \"/in/\").concat(c.inputHandle.name)]\n        });\n      });\n    });\n  });\n  elk.layout(newgraph).then(function (x) {\n    // Reapply positions to galaxy graph from our relayed out graph.\n    x.children.forEach(function (q) {\n      var node = Object.values(workflow.nodes).filter(function (x) {\n        return x._uid === q.id;\n      })[0];\n      var element = jquery__WEBPACK_IMPORTED_MODULE_0___default()(node.element);\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).css({\n        top: q.y,\n        left: q.x\n      });\n    });\n    Object.values(workflow.nodes).forEach(function (node) {\n      node.onRedraw();\n    });\n  })[\"catch\"](console.error);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9Xb3JrZmxvdy9FZGl0b3IvbW9kdWxlcy9sYXlvdXQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Xb3JrZmxvdy9FZGl0b3IvbW9kdWxlcy9sYXlvdXQuanM/NjlkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJCBmcm9tIFwianF1ZXJ5XCI7XG5pbXBvcnQgRUxLIGZyb20gXCJlbGtqcy9saWIvZWxrLmJ1bmRsZWQuanNcIjtcbmNvbnN0IGVsayA9IG5ldyBFTEsoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGF1dG9MYXlvdXQod29ya2Zsb3cpIHtcbiAgICB3b3JrZmxvdy5oYXNDaGFuZ2VzID0gdHJ1ZTtcblxuICAgIC8vIENvbnZlcnQgdGhpcyB0byBFTEsgY29tcGF0LlxuICAgIHZhciBuZXdncmFwaCA9IHtcbiAgICAgICAgaWQ6IFwiXCIsXG4gICAgICAgIGxheW91dE9wdGlvbnM6IHtcbiAgICAgICAgICAgIFwiZWxrLmFsZ29yaXRobVwiOiBcImxheWVyZWRcIixcbiAgICAgICAgICAgIFwiY3Jvc3NpbmdNaW5pbWl6YXRpb24uc2VtaUludGVyYWN0aXZlXCI6IHRydWUsXG4gICAgICAgICAgICBcIm5vZGVQbGFjZW1lbnQuc3RyYXRlZ3lcIjogXCJORVRXT1JLX1NJTVBMRVhcIixcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICBlZGdlczogW10sXG4gICAgfTtcblxuICAgIG5ld2dyYXBoLmNoaWxkcmVuID0gT2JqZWN0LnZhbHVlcyh3b3JrZmxvdy5ub2RlcykubWFwKChub2RlKSA9PiB7XG4gICAgICAgIHZhciBpbnB1dHMgPSBPYmplY3Qua2V5cyhub2RlLmlucHV0VGVybWluYWxzKS5tYXAoKHQsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogYCR7bm9kZS5fdWlkfS9pbi8ke3R9YCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwicG9ydC5zaWRlXCI6IFwiV0VTVFwiLFxuICAgICAgICAgICAgICAgICAgICBcInBvcnQuaW5kZXhcIjogaWR4LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgb3V0cHV0cyA9IE9iamVjdC5rZXlzKG5vZGUub3V0cHV0VGVybWluYWxzKS5tYXAoKHQsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogYCR7bm9kZS5fdWlkfS9vdXQvJHt0fWAsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBcInBvcnQuc2lkZVwiOiBcIkVBU1RcIixcbiAgICAgICAgICAgICAgICAgICAgXCJwb3J0LmluZGV4XCI6IGlkeCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBub2RlLl91aWQsXG4gICAgICAgICAgICBoZWlnaHQ6ICQobm9kZS5lbGVtZW50KS5oZWlnaHQoKSArIDIwLFxuICAgICAgICAgICAgd2lkdGg6ICQobm9kZS5lbGVtZW50KS53aWR0aCgpICsgNjAsXG4gICAgICAgICAgICBwb3J0czogaW5wdXRzLmNvbmNhdChvdXRwdXRzKSxcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIE9iamVjdC52YWx1ZXMod29ya2Zsb3cubm9kZXMpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhub2RlLmlucHV0VGVybWluYWxzKS5mb3JFYWNoKCh0KSA9PiB7XG4gICAgICAgICAgICB0LmNvbm5lY3RvcnMuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICAgICAgICAgIG5ld2dyYXBoLmVkZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpZDogYGVfJHtub2RlLl91aWR9XyR7Yy5vdXRwdXRIYW5kbGUubm9kZS5fdWlkfWAsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFtgJHtjLm91dHB1dEhhbmRsZS5ub2RlLl91aWR9L291dC8ke2Mub3V0cHV0SGFuZGxlLm5hbWV9YF0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IFtgJHtjLmlucHV0SGFuZGxlLm5vZGUuX3VpZH0vaW4vJHtjLmlucHV0SGFuZGxlLm5hbWV9YF0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBlbGsubGF5b3V0KG5ld2dyYXBoKVxuICAgICAgICAudGhlbigoeCkgPT4ge1xuICAgICAgICAgICAgLy8gUmVhcHBseSBwb3NpdGlvbnMgdG8gZ2FsYXh5IGdyYXBoIGZyb20gb3VyIHJlbGF5ZWQgb3V0IGdyYXBoLlxuICAgICAgICAgICAgeC5jaGlsZHJlbi5mb3JFYWNoKChxKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBPYmplY3QudmFsdWVzKHdvcmtmbG93Lm5vZGVzKS5maWx0ZXIoKHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguX3VpZCA9PT0gcS5pZDtcbiAgICAgICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gJChub2RlLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY3NzKHsgdG9wOiBxLnksIGxlZnQ6IHEueCB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKHdvcmtmbG93Lm5vZGVzKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgbm9kZS5vblJlZHJhdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/Workflow/Editor/modules/layout.js\n");

/***/ })

}]);